<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mypage">
	<!-- 로그인된 회원의 레시피들 -->
	<select id="getMyRecipe" parameterType="HashMap" resultType="recipe_dto">
		select * from recipe where email=#{email} limit #{start},#{end}
	</select>
		<!-- 카운트 -->
		<select id="getMyRecipeCount" parameterType="String" resultType="int">
			select count(*) from recipe where email=#{email}
		</select>
	<!-- 로그인된 회원이 스크랩한 레시피번호 -->
	<select id="getMyScrap" parameterType="HashMap" resultType="int">
		select rec_num from scrap where email=#{email} order by rec_num desc limit #{start},#{end}
	</select>
		<!-- 카운트 -->
		<select id="getMyScrapCount" parameterType="String" resultType="int">
			select count(rec_num) from scrap where email=#{email}
		</select>
	<!-- 스크랩한 레시피 -->
	<select id="getMyScrapRecipe" parameterType="int" resultType="recipe_dto">
		select r.*,c.nickname,c.profile from recipe r left join chef c on r.email=c.email where rec_num=#{rec_num}
	</select>
	<!-- 내가 쓴 댓글 가져오기 -->
	<select id="getMyComment" parameterType="HashMap" resultType="comment_dto">
		select * from comment where email=#{email} order by com_writeday desc limit #{start},#{end}
	</select>
	<!-- 댓글정보에서 레시피정보 가지고 오기 -->
	<select id="getCommentRecipe" parameterType="int" resultType="recipe_dto">
		select r.*,c.nickname,c.profile from recipe r left join chef c on r.email=c.email where rec_num=#{rec_num}
	</select>
</mapper>